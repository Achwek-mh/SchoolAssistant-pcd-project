{"ast":null,"code":"var _jsxFileName = \"/home/achwak/Desktop/SchoolAssistant-pcd-project/UI/src/views/face.js\",\n    _s = $RefreshSig$();\n\nimport { Routes, Route, useNavigate } from \"react-router-dom\";\nimport React from \"react\";\nimport { useState, useEffect, useRef } from \"react\";\nimport axios from 'axios';\nimport { Button, Label, CustomInput, Input, InputGroupAddon, InputGroupText, InputGroup, Container, Row, Col } from \"reactstrap\"; // reactstrap components\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Face() {\n  _s();\n\n  const [imageSrc, setImageSrc] = useState(null);\n  const videoRef = useRef(null);\n  const intervalRef = useRef(null);\n  useEffect(() => {\n    // Start fetching the video stream from Flask\n    const fetchData = async () => {\n      try {\n        const response = await axios.get('/video');\n        setImageSrc(response.config.url);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    fetchData(); // Set up an interval to fetch the video stream every 1000ms\n\n    intervalRef.current = setInterval(() => {\n      fetchData();\n    }, 1000);\n    return () => {\n      clearInterval(intervalRef.current);\n    };\n  }, []);\n\n  const handleImageLoad = () => {\n    // Once the image is loaded, start playing the video\n    videoRef.current.play();\n  };\n\n  const handleAccess = async () => {\n    try {\n      await axios.get('/Access'); // If access is granted, redirect to localhost:3000\n\n      window.location.href = 'http://localhost:3000';\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: imageSrc ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        style: {\n          display: 'none'\n        },\n        onLoadedData: handleImageLoad\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: imageSrc,\n        alt: \"Video stream\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleAccess,\n        children: \"Access\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Face, \"el+rwnkCsPGzKvimsqnVJM+qB8A=\");\n\n_c = Face;\n;\n\nvar _c;\n\n$RefreshReg$(_c, \"Face\");","map":{"version":3,"names":["Routes","Route","useNavigate","React","useState","useEffect","useRef","axios","Button","Label","CustomInput","Input","InputGroupAddon","InputGroupText","InputGroup","Container","Row","Col","Face","imageSrc","setImageSrc","videoRef","intervalRef","fetchData","response","get","config","url","error","console","log","current","setInterval","clearInterval","handleImageLoad","play","handleAccess","window","location","href","display"],"sources":["/home/achwak/Desktop/SchoolAssistant-pcd-project/UI/src/views/face.js"],"sourcesContent":["import { Routes , Route , useNavigate } from \"react-router-dom\";\nimport React from \"react\";\nimport { useState , useEffect, useRef  } from \"react\";\n\nimport axios from 'axios';\n\nimport {\n  Button,\n  Label,\n  CustomInput,\n  Input,\n  InputGroupAddon,\n  InputGroupText,\n  InputGroup,\n  Container,\n  Row,\n  Col\n} from \"reactstrap\";\n\n// reactstrap components\n\nexport default function Face() {\n  const [imageSrc, setImageSrc] = useState(null);\n  const videoRef = useRef(null);\n  const intervalRef = useRef(null);\n\n  useEffect(() => {\n    // Start fetching the video stream from Flask\n    const fetchData = async () => {\n      try {\n        const response = await axios.get('/video');\n        setImageSrc(response.config.url);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    fetchData();\n\n    // Set up an interval to fetch the video stream every 1000ms\n    intervalRef.current = setInterval(() => {\n      fetchData();\n    }, 1000);\n\n    return () => {\n      clearInterval(intervalRef.current);\n    };\n  }, []);\n\n  const handleImageLoad = () => {\n    // Once the image is loaded, start playing the video\n    videoRef.current.play();\n  };\n\n  const handleAccess = async () => {\n    try {\n      await axios.get('/Access');\n      // If access is granted, redirect to localhost:3000\n      window.location.href = 'http://localhost:3000';\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return (\n    <div>\n      {imageSrc ? (\n        <div>\n          <video\n            ref={videoRef}\n            style={{ display: 'none' }}\n            onLoadedData={handleImageLoad}\n          />\n          <img src={imageSrc} alt=\"Video stream\" />\n          <button onClick={handleAccess}>Access</button>\n        </div>\n      ) : (\n        <p>Loading...</p>\n      )}\n    </div>\n  );\n};\n"],"mappings":";;;AAAA,SAASA,MAAT,EAAkBC,KAAlB,EAA0BC,WAA1B,QAA6C,kBAA7C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,EAAoBC,SAApB,EAA+BC,MAA/B,QAA8C,OAA9C;AAEA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,SACEC,MADF,EAEEC,KAFF,EAGEC,WAHF,EAIEC,KAJF,EAKEC,eALF,EAMEC,cANF,EAOEC,UAPF,EAQEC,SARF,EASEC,GATF,EAUEC,GAVF,QAWO,YAXP,C,CAaA;;;AAEA,eAAe,SAASC,IAAT,GAAgB;EAAA;;EAC7B,MAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BhB,QAAQ,CAAC,IAAD,CAAxC;EACA,MAAMiB,QAAQ,GAAGf,MAAM,CAAC,IAAD,CAAvB;EACA,MAAMgB,WAAW,GAAGhB,MAAM,CAAC,IAAD,CAA1B;EAEAD,SAAS,CAAC,MAAM;IACd;IACA,MAAMkB,SAAS,GAAG,YAAY;MAC5B,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMjB,KAAK,CAACkB,GAAN,CAAU,QAAV,CAAvB;QACAL,WAAW,CAACI,QAAQ,CAACE,MAAT,CAAgBC,GAAjB,CAAX;MACD,CAHD,CAGE,OAAOC,KAAP,EAAc;QACdC,OAAO,CAACC,GAAR,CAAYF,KAAZ;MACD;IACF,CAPD;;IASAL,SAAS,GAXK,CAad;;IACAD,WAAW,CAACS,OAAZ,GAAsBC,WAAW,CAAC,MAAM;MACtCT,SAAS;IACV,CAFgC,EAE9B,IAF8B,CAAjC;IAIA,OAAO,MAAM;MACXU,aAAa,CAACX,WAAW,CAACS,OAAb,CAAb;IACD,CAFD;EAGD,CArBQ,EAqBN,EArBM,CAAT;;EAuBA,MAAMG,eAAe,GAAG,MAAM;IAC5B;IACAb,QAAQ,CAACU,OAAT,CAAiBI,IAAjB;EACD,CAHD;;EAKA,MAAMC,YAAY,GAAG,YAAY;IAC/B,IAAI;MACF,MAAM7B,KAAK,CAACkB,GAAN,CAAU,SAAV,CAAN,CADE,CAEF;;MACAY,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,uBAAvB;IACD,CAJD,CAIE,OAAOX,KAAP,EAAc;MACdC,OAAO,CAACC,GAAR,CAAYF,KAAZ;IACD;EACF,CARD;;EAUA,oBACE;IAAA,UACGT,QAAQ,gBACP;MAAA,wBACE;QACE,GAAG,EAAEE,QADP;QAEE,KAAK,EAAE;UAAEmB,OAAO,EAAE;QAAX,CAFT;QAGE,YAAY,EAAEN;MAHhB;QAAA;QAAA;QAAA;MAAA,QADF,eAME;QAAK,GAAG,EAAEf,QAAV;QAAoB,GAAG,EAAC;MAAxB;QAAA;QAAA;QAAA;MAAA,QANF,eAOE;QAAQ,OAAO,EAAEiB,YAAjB;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAPF;IAAA;MAAA;MAAA;MAAA;IAAA,QADO,gBAWP;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAZJ;IAAA;IAAA;IAAA;EAAA,QADF;AAiBD;;GA5DuBlB,I;;KAAAA,I;AA4DvB"},"metadata":{},"sourceType":"module"}