{"ast":null,"code":"var _jsxFileName = \"/home/achwak/Desktop/SchoolAssistant-pcd-project/UI/src/views/face.js\",\n    _s = $RefreshSig$();\n\nimport { Routes, Route, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Webcam from 'react-webcam';\nimport React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Face() {\n  _s();\n\n  const handleSpeechRecognition = useCallback(() => {\n    const recognition = new window.webkitSpeechRecognition();\n    recognition.continuous = true;\n    recognition.interimResults = true;\n    recognition.lang = \"fr-FR\";\n\n    recognition.onstart = () => {\n      console.log(\"Speech recognition started\");\n    };\n\n    recognition.onresult = event => {\n      let interimTranscript = \"\";\n      let finalTranscript = \"\";\n\n      for (let i = event.resultIndex; i < event.results.length; i++) {\n        const transcript = event.results[i][0].transcript;\n\n        if (event.results[i].isFinal) {\n          finalTranscript += transcript;\n        } else {\n          interimTranscript += transcript;\n        }\n      }\n\n      setMessage(finalTranscript);\n      console.log(message);\n    };\n\n    recognition.onerror = event => {\n      console.error(event.error);\n    };\n\n    recognition.onend = () => {\n      console.log(\"Speech recognition ended\");\n      handleSpeechRecognition();\n    };\n\n    recognition.start();\n  }, []);\n  const webcamRef = useRef(null);\n  const [name, setName] = useState(null);\n  const [message, setMessage] = useState(\"\");\n  const [logged_in, setlogged_in] = useState(false);\n  const navigate = useNavigate();\n\n  const capture = async () => {\n    const imageSrc = webcamRef.current.getScreenshot();\n\n    if (!imageSrc) {\n      console.log(\"dfgf\");\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append('image', imageSrc);\n    if (message === 'identifier moi') fetch('http://localhost:5000/login', {\n      method: 'POST',\n      body: formData\n    }).then(response => {\n      console.log(response);\n      setName(response.statusText);\n      setlogged_in(true);\n    }).catch(error => {\n      console.error(error);\n    });\n    /*   const response = await axios.post('http://localhost:5000/login', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      }); */\n\n    /* setName(response.data);\n    } catch (error) {\n    console.log(error);\n    setName(\"Error: face not recognized\");\n    } */\n  };\n\n  useEffect(() => {\n    if (!logged_in) handleSpeechRecognition();\n  }, [handleSpeechRecognition]);\n  useEffect(() => {\n    const timeoutId = setTimeout(capture(), 1500);\n    return () => clearTimeout(timeoutId);\n  }, [capture()]);\n  console.log();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page-header header-filter\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrapper\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page-header\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"content-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"content-center brand\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [logged_in === false ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Webcam, {\n                audio: false,\n                ref: webcamRef,\n                screenshotFormat: \"image/jpeg\",\n                width: 640,\n                height: 480\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"submit\",\n                  value: \"Authenticate Me\",\n                  onClick: () => {\n                    capture();\n                  },\n                  className: \"btn btn-primary\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 128,\n                  columnNumber: 13\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n              children: name !== (null || \"You are unknown\") ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"details\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                    children: [\"Hello \", name, \" !\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 138,\n                    columnNumber: 17\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 139,\n                    columnNumber: 17\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-group\",\n                    children: \"                  \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 142,\n                    columnNumber: 17\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 137,\n                  columnNumber: 13\n                }, this)\n              }, void 0, false) : /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"\\\"unknown\\\"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 9\n            }, this), \"  \"]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 3\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 3\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 109,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Face, \"fSIjy6zeh7y94v56iQFbsUoytR8=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Face;\n\nvar _c;\n\n$RefreshReg$(_c, \"Face\");","map":{"version":3,"names":["Routes","Route","useNavigate","axios","Webcam","React","useState","useEffect","useRef","useCallback","Face","handleSpeechRecognition","recognition","window","webkitSpeechRecognition","continuous","interimResults","lang","onstart","console","log","onresult","event","interimTranscript","finalTranscript","i","resultIndex","results","length","transcript","isFinal","setMessage","message","onerror","error","onend","start","webcamRef","name","setName","logged_in","setlogged_in","navigate","capture","imageSrc","current","getScreenshot","formData","FormData","append","fetch","method","body","then","response","statusText","catch","timeoutId","setTimeout","clearTimeout"],"sources":["/home/achwak/Desktop/SchoolAssistant-pcd-project/UI/src/views/face.js"],"sourcesContent":["import { Routes , Route , useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Webcam from 'react-webcam';\nimport React, { useState, useEffect, useRef,useCallback } from \"react\";\n\nexport default function Face ()  {\n  const handleSpeechRecognition =useCallback(() => {\n    \n    const recognition = new window.webkitSpeechRecognition();\n    recognition.continuous = true;\n    recognition.interimResults = true;\n    recognition.lang = \"fr-FR\";\n\n    recognition.onstart = () => {\n      console.log(\"Speech recognition started\");\n    };\n\n    recognition.onresult = (event) => {\n      let interimTranscript = \"\";\n      let finalTranscript = \"\";\n\n      for (let i = event.resultIndex; i < event.results.length; i++) {\n        const transcript = event.results[i][0].transcript;\n\n        if (event.results[i].isFinal) {\n          finalTranscript += transcript;\n        } else {\n          interimTranscript += transcript;\n        }\n      }\n\n      setMessage(finalTranscript);\n      console.log(message)\n    };\n\n    recognition.onerror = (event) => {\n      console.error(event.error);\n    };\n\n    recognition.onend = () => {\n      console.log(\"Speech recognition ended\");\n      handleSpeechRecognition();\n    };\n\n    recognition.start();\n  },[]);\n  const webcamRef = useRef(null);\n    const [name, setName] = useState(null);\n    const [message, setMessage] = useState(\"\");\n\n    const [logged_in, setlogged_in] = useState(false);\n    const navigate = useNavigate();\n\n\n  const capture = async () => {\n   \n    const imageSrc = webcamRef.current.getScreenshot();\n    if (!imageSrc) {\n      console.log(\"dfgf\")\n      return;\n    }\n    const formData = new FormData();\n    formData.append('image', imageSrc);\n   if(message==='identifier moi')\n      fetch('http://localhost:5000/login', {\n        method: 'POST',\n     \n        body:\n          formData        \n      })\n        .then((response) =>{ \n          console.log(response)\n          setName(response.statusText)\n        setlogged_in(true)\n      })\n        \n     \n      .catch(error => {\n        console.error(error);\n      });\n    \n    \n    /*   const response = await axios.post('http://localhost:5000/login', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      }); */\n\n        /* setName(response.data);\n      } catch (error) {\n        console.log(error);\n        setName(\"Error: face not recognized\");\n      } */\n  \n  }\n\n  useEffect(() => {\n    if (!logged_in)\n    handleSpeechRecognition();\n  }, [handleSpeechRecognition]);\n\n  useEffect(() => {\n    const timeoutId = setTimeout(capture(), 1500);\n    return () => clearTimeout(timeoutId);\n\n  }, [capture()]);\n  console.log()\n  return (\n    <div className=\"page-header header-filter\">\n    <div className=\"wrapper\">\n  <div className=\"page-header\">\n  <div className=\"content-center\">\n\n    \n      <div className=\"content-center brand\" ></div>\n\n    <>\n        {logged_in === false ?\n        <>\n          <Webcam\n        audio={false}\n        ref={webcamRef}\n        screenshotFormat=\"image/jpeg\"\n        width={640}\n        height={480}\n      />\n        <div className=\"form-group\"  >\n            <input type=\"submit\" value=\"Authenticate Me\" onClick={()=>{capture()}} className=\"btn btn-primary\" />\n        </div>\n     \n        </>\n        :\n        <div>\n\n           {name !== (null || \"You are unknown\") ?\n        <>\n            <div className=\"details\">\n                <h1>Hello {name} !</h1>\n                <br />\n                \n                \n                <div className=\"form-group\">\n{/*                       <input type=\"submit\" value=\"Logout\" onClick={()=>{this.setState({msg:null,logged_in:false})}} className=\"btn btn-primary\" />\n*/}                  </div>  \n            </div>\n            </>\n        :\n        <div>\n          <p>\"unknown\"</p>\n        </div>\n        }\n        </div>\n        \n        }  </>\n        \n \n  </div>\n  </div>\n  </div>\n  </div>\n   \n   \n)\n}\n \n\n\n\n\n"],"mappings":";;;AAAA,SAASA,MAAT,EAAkBC,KAAlB,EAA0BC,WAA1B,QAA6C,kBAA7C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,OAAOC,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,MAArC,EAA4CC,WAA5C,QAA+D,OAA/D;;;AAEA,eAAe,SAASC,IAAT,GAAkB;EAAA;;EAC/B,MAAMC,uBAAuB,GAAEF,WAAW,CAAC,MAAM;IAE/C,MAAMG,WAAW,GAAG,IAAIC,MAAM,CAACC,uBAAX,EAApB;IACAF,WAAW,CAACG,UAAZ,GAAyB,IAAzB;IACAH,WAAW,CAACI,cAAZ,GAA6B,IAA7B;IACAJ,WAAW,CAACK,IAAZ,GAAmB,OAAnB;;IAEAL,WAAW,CAACM,OAAZ,GAAsB,MAAM;MAC1BC,OAAO,CAACC,GAAR,CAAY,4BAAZ;IACD,CAFD;;IAIAR,WAAW,CAACS,QAAZ,GAAwBC,KAAD,IAAW;MAChC,IAAIC,iBAAiB,GAAG,EAAxB;MACA,IAAIC,eAAe,GAAG,EAAtB;;MAEA,KAAK,IAAIC,CAAC,GAAGH,KAAK,CAACI,WAAnB,EAAgCD,CAAC,GAAGH,KAAK,CAACK,OAAN,CAAcC,MAAlD,EAA0DH,CAAC,EAA3D,EAA+D;QAC7D,MAAMI,UAAU,GAAGP,KAAK,CAACK,OAAN,CAAcF,CAAd,EAAiB,CAAjB,EAAoBI,UAAvC;;QAEA,IAAIP,KAAK,CAACK,OAAN,CAAcF,CAAd,EAAiBK,OAArB,EAA8B;UAC5BN,eAAe,IAAIK,UAAnB;QACD,CAFD,MAEO;UACLN,iBAAiB,IAAIM,UAArB;QACD;MACF;;MAEDE,UAAU,CAACP,eAAD,CAAV;MACAL,OAAO,CAACC,GAAR,CAAYY,OAAZ;IACD,CAhBD;;IAkBApB,WAAW,CAACqB,OAAZ,GAAuBX,KAAD,IAAW;MAC/BH,OAAO,CAACe,KAAR,CAAcZ,KAAK,CAACY,KAApB;IACD,CAFD;;IAIAtB,WAAW,CAACuB,KAAZ,GAAoB,MAAM;MACxBhB,OAAO,CAACC,GAAR,CAAY,0BAAZ;MACAT,uBAAuB;IACxB,CAHD;;IAKAC,WAAW,CAACwB,KAAZ;EACD,CAvCyC,EAuCxC,EAvCwC,CAA1C;EAwCA,MAAMC,SAAS,GAAG7B,MAAM,CAAC,IAAD,CAAxB;EACE,MAAM,CAAC8B,IAAD,EAAOC,OAAP,IAAkBjC,QAAQ,CAAC,IAAD,CAAhC;EACA,MAAM,CAAC0B,OAAD,EAAUD,UAAV,IAAwBzB,QAAQ,CAAC,EAAD,CAAtC;EAEA,MAAM,CAACkC,SAAD,EAAYC,YAAZ,IAA4BnC,QAAQ,CAAC,KAAD,CAA1C;EACA,MAAMoC,QAAQ,GAAGxC,WAAW,EAA5B;;EAGF,MAAMyC,OAAO,GAAG,YAAY;IAE1B,MAAMC,QAAQ,GAAGP,SAAS,CAACQ,OAAV,CAAkBC,aAAlB,EAAjB;;IACA,IAAI,CAACF,QAAL,EAAe;MACbzB,OAAO,CAACC,GAAR,CAAY,MAAZ;MACA;IACD;;IACD,MAAM2B,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;IACAD,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAAyBL,QAAzB;IACD,IAAGZ,OAAO,KAAG,gBAAb,EACGkB,KAAK,CAAC,6BAAD,EAAgC;MACnCC,MAAM,EAAE,MAD2B;MAGnCC,IAAI,EACFL;IAJiC,CAAhC,CAAL,CAMGM,IANH,CAMSC,QAAD,IAAa;MACjBnC,OAAO,CAACC,GAAR,CAAYkC,QAAZ;MACAf,OAAO,CAACe,QAAQ,CAACC,UAAV,CAAP;MACFd,YAAY,CAAC,IAAD,CAAZ;IACD,CAVD,EAaCe,KAbD,CAaOtB,KAAK,IAAI;MACdf,OAAO,CAACe,KAAR,CAAcA,KAAd;IACD,CAfD;IAkBF;AACJ;AACA;AACA;AACA;;IAEQ;AACR;AACA;AACA;AACA;EAEG,CAxCD;;EA0CA3B,SAAS,CAAC,MAAM;IACd,IAAI,CAACiC,SAAL,EACA7B,uBAAuB;EACxB,CAHQ,EAGN,CAACA,uBAAD,CAHM,CAAT;EAKAJ,SAAS,CAAC,MAAM;IACd,MAAMkD,SAAS,GAAGC,UAAU,CAACf,OAAO,EAAR,EAAY,IAAZ,CAA5B;IACA,OAAO,MAAMgB,YAAY,CAACF,SAAD,CAAzB;EAED,CAJQ,EAIN,CAACd,OAAO,EAAR,CAJM,CAAT;EAKAxB,OAAO,CAACC,GAAR;EACA,oBACE;IAAK,SAAS,EAAC,2BAAf;IAAA,uBACA;MAAK,SAAS,EAAC,SAAf;MAAA,uBACF;QAAK,SAAS,EAAC,aAAf;QAAA,uBACA;UAAK,SAAS,EAAC,gBAAf;UAAA,wBAGI;YAAK,SAAS,EAAC;UAAf;YAAA;YAAA;YAAA;UAAA,QAHJ,eAKE;YAAA,WACKoB,SAAS,KAAK,KAAd,gBACD;cAAA,wBACE,QAAC,MAAD;gBACF,KAAK,EAAE,KADL;gBAEF,GAAG,EAAEH,SAFH;gBAGF,gBAAgB,EAAC,YAHf;gBAIF,KAAK,EAAE,GAJL;gBAKF,MAAM,EAAE;cALN;gBAAA;gBAAA;gBAAA;cAAA,QADF,eAQA;gBAAK,SAAS,EAAC,YAAf;gBAAA,uBACI;kBAAO,IAAI,EAAC,QAAZ;kBAAqB,KAAK,EAAC,iBAA3B;kBAA6C,OAAO,EAAE,MAAI;oBAACM,OAAO;kBAAG,CAArE;kBAAuE,SAAS,EAAC;gBAAjF;kBAAA;kBAAA;kBAAA;gBAAA;cADJ;gBAAA;gBAAA;gBAAA;cAAA,QARA;YAAA,gBADC,gBAeD;cAAA,UAEIL,IAAI,MAAM,QAAQ,iBAAd,CAAJ,gBACJ;gBAAA,uBACI;kBAAK,SAAS,EAAC,SAAf;kBAAA,wBACI;oBAAA,qBAAWA,IAAX;kBAAA;oBAAA;oBAAA;oBAAA;kBAAA,QADJ,eAEI;oBAAA;oBAAA;oBAAA;kBAAA,QAFJ,eAKI;oBAAK,SAAS,EAAC,YAAf;oBAAA;kBAAA;oBAAA;oBAAA;oBAAA;kBAAA,QALJ;gBAAA;kBAAA;kBAAA;kBAAA;gBAAA;cADJ,iBADI,gBAaJ;gBAAA,uBACE;kBAAA;gBAAA;kBAAA;kBAAA;kBAAA;gBAAA;cADF;gBAAA;gBAAA;gBAAA;cAAA;YAfA;cAAA;cAAA;cAAA;YAAA,QAhBJ;UAAA,gBALF;QAAA;UAAA;UAAA;UAAA;QAAA;MADA;QAAA;QAAA;QAAA;MAAA;IADE;MAAA;MAAA;MAAA;IAAA;EADA;IAAA;IAAA;IAAA;EAAA,QADF;AAwDD;;GA9JuB5B,I;UA8CHR,W;;;KA9CGQ,I"},"metadata":{},"sourceType":"module"}