{"ast":null,"code":"var _jsxFileName = \"/home/achwak/Desktop/SchoolAssistant-pcd-project/UI/src/views/face.js\",\n    _s = $RefreshSig$();\n\nimport { Routes, Route, useNavigate } from \"react-router-dom\";\nimport React from \"react\";\nimport { useState, useEffect, useRef } from \"react\";\nimport axios from 'axios';\nimport { Button, Label, CustomInput, Input, InputGroupAddon, InputGroupText, InputGroup, Container, Row, Col } from \"reactstrap\"; // reactstrap components\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Face() {\n  _s();\n\n  const [isAllowed, setIsAllowed] = useState(false);\n  const [videoStream, setVideoStream] = useState(null);\n  useEffect(() => {\n    axios.get(\"http://localhost:5000/video\").then(response => {\n      const stream = new MediaStream();\n      const video = document.createElement(\"video\");\n      video.autoplay = true;\n      video.srcObject = stream;\n      setVideoStream(stream);\n      const boundary = response.headers[\"content-type\"].split(\"=\")[1];\n      const reader = response.body.getReader();\n      let buffer = \"\";\n      reader.read().then(function processResult(result) {\n        buffer += new TextDecoder(\"utf-8\").decode(result.value);\n        const parts = buffer.split(`--${boundary}`);\n        parts.forEach(part => {\n          if (!part.includes(\"Content-Type: image/jpeg\")) return;\n          const blob = new Blob([`--${boundary}${part}`], {\n            type: \"image/jpeg\"\n          });\n          const url = URL.createObjectURL(blob);\n          const image = new Image();\n\n          image.onload = function () {\n            stream.addTrack(image.captureStream().getVideoTracks()[0]);\n          };\n\n          image.src = url;\n        });\n        buffer = parts[parts.length - 1];\n        return reader.read().then(processResult);\n      });\n    });\n  }, []);\n\n  const handleAccess = () => {\n    axios.get(\"http://localhost:5000/Access\").then(response => {\n      setIsAllowed(response.data.allowed);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [isAllowed ? /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Access granted\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Access denied\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleAccess,\n        children: \"Request access\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n      ref: videoStream\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Face, \"UQtr09t4kI14FjrxzxSgrRBICYo=\");\n\n_c = Face;\n;\n\nvar _c;\n\n$RefreshReg$(_c, \"Face\");","map":{"version":3,"names":["Routes","Route","useNavigate","React","useState","useEffect","useRef","axios","Button","Label","CustomInput","Input","InputGroupAddon","InputGroupText","InputGroup","Container","Row","Col","Face","isAllowed","setIsAllowed","videoStream","setVideoStream","get","then","response","stream","MediaStream","video","document","createElement","autoplay","srcObject","boundary","headers","split","reader","body","getReader","buffer","read","processResult","result","TextDecoder","decode","value","parts","forEach","part","includes","blob","Blob","type","url","URL","createObjectURL","image","Image","onload","addTrack","captureStream","getVideoTracks","src","length","handleAccess","data","allowed"],"sources":["/home/achwak/Desktop/SchoolAssistant-pcd-project/UI/src/views/face.js"],"sourcesContent":["import { Routes , Route , useNavigate } from \"react-router-dom\";\nimport React from \"react\";\nimport { useState , useEffect, useRef  } from \"react\";\n\nimport axios from 'axios';\n\nimport {\n  Button,\n  Label,\n  CustomInput,\n  Input,\n  InputGroupAddon,\n  InputGroupText,\n  InputGroup,\n  Container,\n  Row,\n  Col\n} from \"reactstrap\";\n\n// reactstrap components\n\nexport default function Face() {\n    const [isAllowed, setIsAllowed] = useState(false);\n  const [videoStream, setVideoStream] = useState(null);\n\n  useEffect(() => {\n    axios.get(\"http://localhost:5000/video\").then((response) => {\n      const stream = new MediaStream();\n      const video = document.createElement(\"video\");\n      video.autoplay = true;\n      video.srcObject = stream;\n      setVideoStream(stream);\n\n      const boundary = response.headers[\"content-type\"].split(\"=\")[1];\n      const reader = response.body.getReader();\n      let buffer = \"\";\n\n      reader.read().then(function processResult(result) {\n        buffer += new TextDecoder(\"utf-8\").decode(result.value);\n        const parts = buffer.split(`--${boundary}`);\n        parts.forEach((part) => {\n          if (!part.includes(\"Content-Type: image/jpeg\")) return;\n          const blob = new Blob([`--${boundary}${part}`], {\n            type: \"image/jpeg\",\n          });\n          const url = URL.createObjectURL(blob);\n          const image = new Image();\n          image.onload = function () {\n            stream.addTrack(image.captureStream().getVideoTracks()[0]);\n          };\n          image.src = url;\n        });\n        buffer = parts[parts.length - 1];\n        return reader.read().then(processResult);\n      });\n    });\n  }, []);\n\n  const handleAccess = () => {\n    axios.get(\"http://localhost:5000/Access\").then((response) => {\n      setIsAllowed(response.data.allowed);\n    });\n  };\n\n  return (\n    <div>\n      {isAllowed ? (\n        <h1>Access granted</h1>\n      ) : (\n        <div>\n          <h1>Access denied</h1>\n          <button onClick={handleAccess}>Request access</button>\n        </div>\n      )}\n      <video ref={videoStream} />\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}