{"ast":null,"code":"var _jsxFileName = \"/home/achwak/Desktop/SchoolAssistant-pcd-project/UI/src/views/face.js\",\n    _s = $RefreshSig$();\n\nimport { Routes, Route, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Webcam from 'react-webcam';\nimport React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Face() {\n  _s();\n\n  const handleSpeechRecognition = useCallback(() => {\n    const recognition = new window.webkitSpeechRecognition();\n    recognition.continuous = true;\n    recognition.interimResults = true;\n    recognition.lang = \"fr-FR\";\n\n    recognition.onstart = () => {\n      console.log(\"Speech recognition started\");\n    };\n\n    recognition.onresult = event => {\n      let interimTranscript = \"\";\n      let finalTranscript = \"\";\n\n      for (let i = event.resultIndex; i < event.results.length; i++) {\n        const transcript = event.results[i][0].transcript;\n\n        if (event.results[i].isFinal) {\n          finalTranscript += transcript;\n        } else {\n          interimTranscript += transcript;\n        }\n      }\n\n      setMessage(finalTranscript);\n      console.log(message);\n    };\n\n    recognition.onerror = event => {\n      console.error(event.error);\n    };\n\n    recognition.onend = () => {\n      console.log(\"Speech recognition ended\");\n      handleSpeechRecognition();\n    };\n\n    recognition.start();\n  }, []);\n\n  const navigatetoprof = () => {\n    navigate('/');\n  };\n\n  const webcamRef = useRef(null);\n  const [name, setName] = useState(null);\n  const [message, setMessage] = useState(\"\");\n  const [logged_in, setlogged_in] = useState(false);\n  const navigate = useNavigate();\n\n  const capture = async () => {\n    const imageSrc = webcamRef.current.getScreenshot();\n\n    if (!imageSrc) {\n      console.log(\"dfgf\");\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append('image', imageSrc);\n    if (message === 'identifier moi') fetch('http://localhost:5000/login', {\n      method: 'POST',\n      body: formData\n    }).then(response => {\n      console.log(response);\n      setName(response.statusText);\n      setlogged_in(true);\n\n      if (response !== (null || \"You are unknown\")) {\n        setTimeout(i => {\n          navigatetoprof(true);\n        }, 5000);\n      }\n    }).catch(error => {\n      console.error(error);\n    });\n  };\n\n  useEffect(() => {\n    if (name !== (null || \"You are unknown\")) {\n      const timerId = setInterval(() => {\n        setTimeLeft(prevTimeLeft => prevTimeLeft - 1);\n      }, 1000);\n      return () => clearInterval(timerId);\n    }\n  }, []);\n  const [timeLeft, setTimeLeft] = useState(8);\n  useEffect(() => {\n    if (!logged_in) handleSpeechRecognition();\n  }, [handleSpeechRecognition]);\n  useEffect(() => {\n    if (!logged_in) {\n      const timeoutId = setTimeout(capture(), 1500);\n      return () => clearTimeout(timeoutId);\n    }\n  }, [capture()]);\n  console.log(logged_in);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page-header header-filter\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrapper\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page-header\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"content-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"content-center brand\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [logged_in === false ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Webcam, {\n                audio: false,\n                ref: webcamRef,\n                screenshotFormat: \"image/jpeg\",\n                width: 640,\n                height: 480\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"submit\",\n                  value: \"Authenticate Me\",\n                  onClick: () => {\n                    capture();\n                  },\n                  className: \"btn btn-primary\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 132,\n                  columnNumber: 13\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n              children: name !== (null || \"You are unknown\") ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"details\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                    children: [\"Hello \", name, \" !\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 142,\n                    columnNumber: 17\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 143,\n                    columnNumber: 17\n                  }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n                    children: [\"You are successfully logged in to the system. you will be redirected after :\", logged_in && /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: timeLeft\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 146,\n                      columnNumber: 63\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 145,\n                    columnNumber: 17\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-group\",\n                    children: \"                  \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 148,\n                    columnNumber: 17\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 141,\n                  columnNumber: 13\n                }, this)\n              }, void 0, false) : /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"\\\"unknown\\\"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 155,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 9\n            }, this), \"  \"]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 3\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 3\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Face, \"+2sszdXarey6wE4stZmLCHQhW3I=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Face;\n\nvar _c;\n\n$RefreshReg$(_c, \"Face\");","map":{"version":3,"names":["Routes","Route","useNavigate","axios","Webcam","React","useState","useEffect","useRef","useCallback","Face","handleSpeechRecognition","recognition","window","webkitSpeechRecognition","continuous","interimResults","lang","onstart","console","log","onresult","event","interimTranscript","finalTranscript","i","resultIndex","results","length","transcript","isFinal","setMessage","message","onerror","error","onend","start","navigatetoprof","navigate","webcamRef","name","setName","logged_in","setlogged_in","capture","imageSrc","current","getScreenshot","formData","FormData","append","fetch","method","body","then","response","statusText","setTimeout","catch","timerId","setInterval","setTimeLeft","prevTimeLeft","clearInterval","timeLeft","timeoutId","clearTimeout"],"sources":["/home/achwak/Desktop/SchoolAssistant-pcd-project/UI/src/views/face.js"],"sourcesContent":["import { Routes , Route , useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Webcam from 'react-webcam';\nimport React, { useState, useEffect, useRef,useCallback } from \"react\";\n\nexport default function Face ()  {\n    const handleSpeechRecognition =useCallback(() => {\n    \n    const recognition = new window.webkitSpeechRecognition();\n    recognition.continuous = true;\n    recognition.interimResults = true;\n    recognition.lang = \"fr-FR\";\n\n    recognition.onstart = () => {\n      console.log(\"Speech recognition started\");\n    };\n\n    recognition.onresult = (event) => {\n      let interimTranscript = \"\";\n      let finalTranscript = \"\";\n\n      for (let i = event.resultIndex; i < event.results.length; i++) {\n        const transcript = event.results[i][0].transcript;\n\n        if (event.results[i].isFinal) {\n          finalTranscript += transcript;\n        } else {\n          interimTranscript += transcript;\n        }\n      }\n\n      setMessage(finalTranscript);\n      console.log(message)\n    };\n\n    recognition.onerror = (event) => {\n      console.error(event.error);\n    };\n\n    recognition.onend = () => {\n      console.log(\"Speech recognition ended\");\n      handleSpeechRecognition();\n    };\n\n    recognition.start();\n  },[]);\n const navigatetoprof=()=>{\n  navigate('/')\n}\n    const webcamRef = useRef(null);\n    const [name, setName] = useState(null);\n    const [message, setMessage] = useState(\"\");\n\n    const [logged_in, setlogged_in] = useState(false);\n    const navigate = useNavigate();\n    const capture = async () => {\n    const imageSrc = webcamRef.current.getScreenshot();\n    if (!imageSrc) {\n      console.log(\"dfgf\")\n      return;\n    }\n    const formData = new FormData();\n    formData.append('image', imageSrc);\n   if(message==='identifier moi')\n      fetch('http://localhost:5000/login', {\n        method: 'POST',\n     \n        body:\n          formData        \n      })\n        .then((response) =>{ \n          console.log(response)\n          setName(response.statusText)\n        setlogged_in(true)\n        if (response!== (null || \"You are unknown\")){\n        setTimeout((i) => {\n         navigatetoprof(true);\n       }, 5000);\n      }\n      })\n        \n     \n      .catch(error => {\n        console.error(error);\n      });\n  \n  }\nuseEffect(() => {\n    if (name!== (null || \"You are unknown\")){\n const timerId = setInterval(() => {\n   setTimeLeft(prevTimeLeft => prevTimeLeft - 1);\n }, 1000);\n\n return () => clearInterval(timerId);}\n}, []);\n\nconst [timeLeft, setTimeLeft] = useState(8);\n\nuseEffect(() => {\n    if (!logged_in)\n    handleSpeechRecognition();\n  }, [handleSpeechRecognition]);\n\nuseEffect(() => {\n    if (!logged_in)\n    {const timeoutId = setTimeout(capture(), 1500);\n    return () => clearTimeout(timeoutId);}\n\n  }, [capture()]);\n\nconsole.log(logged_in)\n  return (\n    <div className=\"page-header header-filter\">\n    <div className=\"wrapper\">\n  <div className=\"page-header\">\n  <div className=\"content-center\">\n\n    \n      <div className=\"content-center brand\" ></div>\n\n    <>\n        {logged_in === false ?\n        <>\n          <Webcam\n        audio={false}\n        ref={webcamRef}\n        screenshotFormat=\"image/jpeg\"\n        width={640}\n        height={480}\n      />\n        <div className=\"form-group\"  >\n            <input type=\"submit\" value=\"Authenticate Me\" onClick={()=>{capture()}} className=\"btn btn-primary\" />\n        </div>\n     \n        </>\n        :\n        <div>\n\n           {name !== (null || \"You are unknown\") ?\n        <>\n            <div className=\"details\">\n                <h1>Hello {name} !</h1>\n                <br />\n                \n                <h1>You are successfully logged in to the system.\n                  you will be redirected after :{logged_in && <p>{timeLeft}</p>} \n            </h1>\n                <div className=\"form-group\">\n{/*                       <input type=\"submit\" value=\"Logout\" onClick={()=>{this.setState({msg:null,logged_in:false})}} className=\"btn btn-primary\" />\n*/}                  </div>  \n            </div>\n            </>\n        :\n        <div>\n          <p>\"unknown\"</p>\n        </div>\n        }\n        </div>\n        \n        }  </>\n        \n \n  </div>\n  </div>\n  </div>\n  </div>\n   \n   \n)\n}\n \n\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}