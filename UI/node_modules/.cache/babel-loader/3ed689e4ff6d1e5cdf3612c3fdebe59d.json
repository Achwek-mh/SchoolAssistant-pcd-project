{"ast":null,"code":"var _jsxFileName = \"/home/achwak/Desktop/SchoolAssistant-pcd-project/UI/src/views/face.js\",\n    _s = $RefreshSig$();\n\nimport { Routes, Route, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport React from \"react\";\nimport { useState, useEffect, useCallback, useRef } from \"react\";\nimport { Button, Label, CustomInput, Input, InputGroupAddon, InputGroupText, InputGroup, Container, Row, Col } from \"reactstrap\"; // reactstrap components\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Face() {\n  _s();\n\n  const [message, setMessage] = useState(\"\");\n  /* \n    const handleSpeechRecognition =  useCallback(() => {\n      const recognition = new window.webkitSpeechRecognition();\n      recognition.continuous = true;\n      recognition.interimResults = true;\n      recognition.lang = \"fr-FR\";\n  \n      recognition.onstart = () => {\n        console.log(\"Speech recognition started\");\n      };\n  \n      recognition.onresult = (event) => {\n        let interimTranscript = \"\";\n        let finalTranscript = \"\";\n  \n        for (let i = event.resultIndex; i < event.results.length; i++) {\n          const transcript = event.results[i][0].transcript;\n  \n          if (event.results[i].isFinal) {\n            finalTranscript += transcript;\n          } else {\n            interimTranscript += transcript;\n          }\n        }\n  \n        setMessage(finalTranscript);\n      };\n  \n      recognition.onerror = (event) => {\n        console.error(event.error);\n      };\n  \n      recognition.onend = () => {\n        console.log(\"Speech recognition ended\");\n        handleSpeechRecognition();\n      };\n  \n      recognition.start();\n    },[]); \n    /*    useEffect(() => {\n        handleSpeechRecognition();\n      }, []); */\n\n  const [name, setName] = useState(null);\n  const [imagePath, setimagePath] = useState('');\n  const [logged_in, setlogged_in] = useState(false);\n  const navigate = useNavigate();\n\n  const navigatetoprof = () => {\n    navigate('/');\n  };\n\n  const login = async () => {\n    /*  fetch(\"http://127.0.0.1:5000/login\")\n    .then(res =>\n      {console.log(res)\n      setimagePath(res.statusText)\n      console.log(imagePath)\n      })\n    .then((res)=>{\n      \n     \n        setName(res) ;\n        setlogged_in(true)\n        console.log(logged_in)\n         if (res!= (null || \"You are unknown\")){\n          setTimeout((i) => {\n           navigatetoprof(true);\n         }, 5000);\n        }\n      \n    \n    }) */\n    axios.get(\"http://127.0.0.1:5000/login\").then(res => {\n      console.log(res);\n      setName(res.data[0]);\n      setimagePath(res.data[1].image_url);\n    }).then(res => {\n      setlogged_in(true);\n      console.log(logged_in);\n\n      if (res !== (null || \"You are unknown\")) {\n        setTimeout(i => {\n          navigatetoprof(true);\n        }, 5000);\n      }\n    }).catch(error => {\n      console.error(error);\n    });\n  };\n\n  useEffect(() => {\n    const timeoutId = setTimeout(login, 2000);\n    return () => clearTimeout(timeoutId);\n  }, [login]);\n  const [timeLeft, setTimeLeft] = useState(8);\n  console.log(imagePath);\n  useEffect(() => {\n    if (name !== (null || \"You are unknown\")) {\n      const timerId = setInterval(() => {\n        setTimeLeft(prevTimeLeft => prevTimeLeft - 1);\n      }, 1000);\n      return () => clearInterval(timerId);\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page-header header-filter\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrapper\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page-header\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"content-center\",\n          children: /*#__PURE__*/_jsxDEV(Container, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"content-center brand\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [logged_in === false ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"submit\",\n                    value: \"Authenticate Me\",\n                    onClick: () => {\n                      login();\n                    },\n                    className: \"btn btn-primary\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 152,\n                    columnNumber: 15\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 151,\n                  columnNumber: 11\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: openCamera,\n                    children: \"Open Camera\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 155,\n                    columnNumber: 17\n                  }, this), showCamera && /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: /*#__PURE__*/_jsxDEV(\"video\", {\n                      ref: videoRef,\n                      autoPlay: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 158,\n                      columnNumber: 21\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 157,\n                    columnNumber: 19\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 154,\n                  columnNumber: 11\n                }, this)]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imagePath,\n                  alt: \"logo\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 27\n                }, this), name !== (null || \"You are unknown\") ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"details\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                      children: [\"Hello \", name, \" !\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 170,\n                      columnNumber: 19\n                    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 171,\n                      columnNumber: 19\n                    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n                      children: [\"You are successfully logged in to the system. you will be redirected after :\", logged_in && /*#__PURE__*/_jsxDEV(\"p\", {\n                        children: timeLeft\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 174,\n                        columnNumber: 63\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 173,\n                      columnNumber: 19\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"form-group\",\n                      children: \"                  \"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 176,\n                      columnNumber: 19\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 169,\n                    columnNumber: 15\n                  }, this)\n                }, void 0, false) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: \"\\\"unknown\\\"\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 183,\n                    columnNumber: 13\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 182,\n                  columnNumber: 11\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 11\n              }, this), \"  \"]\n            }, void 0, true)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 5\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 140,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Face, \"XGIC7V1TTZng+VpmiVlsaIM7/D8=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Face;\n\nvar _c;\n\n$RefreshReg$(_c, \"Face\");","map":{"version":3,"names":["Routes","Route","useNavigate","axios","React","useState","useEffect","useCallback","useRef","Button","Label","CustomInput","Input","InputGroupAddon","InputGroupText","InputGroup","Container","Row","Col","Face","message","setMessage","name","setName","imagePath","setimagePath","logged_in","setlogged_in","navigate","navigatetoprof","login","get","then","res","console","log","data","image_url","setTimeout","i","catch","error","timeoutId","clearTimeout","timeLeft","setTimeLeft","timerId","setInterval","prevTimeLeft","clearInterval","openCamera","showCamera","videoRef"],"sources":["/home/achwak/Desktop/SchoolAssistant-pcd-project/UI/src/views/face.js"],"sourcesContent":["import { Routes , Route , useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\n\nimport React from \"react\";\nimport { useState, useEffect , useCallback,useRef} from \"react\";\n\n\nimport {\n  Button,\n  Label,\n  CustomInput,\n  Input,\n  InputGroupAddon,\n  InputGroupText,\n  InputGroup,\n  Container,\n  Row,\n  Col\n} from \"reactstrap\";\n\n// reactstrap components\n\nexport default function Face () {\n  const [message, setMessage] = useState(\"\");\n  \n\n\n/* \n  const handleSpeechRecognition =  useCallback(() => {\n    const recognition = new window.webkitSpeechRecognition();\n    recognition.continuous = true;\n    recognition.interimResults = true;\n    recognition.lang = \"fr-FR\";\n\n    recognition.onstart = () => {\n      console.log(\"Speech recognition started\");\n    };\n\n    recognition.onresult = (event) => {\n      let interimTranscript = \"\";\n      let finalTranscript = \"\";\n\n      for (let i = event.resultIndex; i < event.results.length; i++) {\n        const transcript = event.results[i][0].transcript;\n\n        if (event.results[i].isFinal) {\n          finalTranscript += transcript;\n        } else {\n          interimTranscript += transcript;\n        }\n      }\n\n      setMessage(finalTranscript);\n    };\n\n    recognition.onerror = (event) => {\n      console.error(event.error);\n    };\n\n    recognition.onend = () => {\n      console.log(\"Speech recognition ended\");\n      handleSpeechRecognition();\n    };\n\n    recognition.start();\n  },[]); \n  /*    useEffect(() => {\n      handleSpeechRecognition();\n    }, []); */\n    const [name, setName] = useState(null);\n    const [imagePath, setimagePath] = useState('');\n\n    const [logged_in, setlogged_in] = useState(false);\n\n \n\nconst navigate = useNavigate();\nconst navigatetoprof=()=>{\n  navigate('/')\n}\nconst login =async () => {\n  /*  fetch(\"http://127.0.0.1:5000/login\")\n  .then(res =>\n    {console.log(res)\n    setimagePath(res.statusText)\n    console.log(imagePath)\n    })\n  .then((res)=>{\n    \n   \n      setName(res) ;\n      setlogged_in(true)\n      console.log(logged_in)\n\n      if (res!= (null || \"You are unknown\")){\n        setTimeout((i) => {\n         navigatetoprof(true);\n       }, 5000);\n      }\n    \n  \n  }) */\n  axios\n  .get(\"http://127.0.0.1:5000/login\")\n  .then((res) => {\n    console.log(res);\n    setName(res.data[0]) ;\n    \n    setimagePath(res.data[1].image_url); })\n    .then((res)=>{\n      setlogged_in(true)\n      console.log(logged_in)\n\n      if (res!== (null || \"You are unknown\")){\n        setTimeout((i) => {\n         navigatetoprof(true);\n       }, 5000);\n      }\n  })\n  .catch((error) => {\n    console.error(error);\n  });\n};\nuseEffect(() => {\n  const timeoutId = setTimeout(login, 2000);\n  return () => clearTimeout(timeoutId);\n}, [login]);\nconst [timeLeft, setTimeLeft] = useState(8);\nconsole.log(imagePath)\nuseEffect(() => {\n     if (name!== (null || \"You are unknown\")){\n  const timerId = setInterval(() => {\n    setTimeLeft(prevTimeLeft => prevTimeLeft - 1);\n  }, 1000);\n\n  return () => clearInterval(timerId);}\n}, []);\n\n  return (\n    <div className=\"page-header header-filter\">\n      <div className=\"wrapper\">\n    <div className=\"page-header\">\n    <div className=\"content-center\">\n\n      <Container>\n        <div className=\"content-center brand\" ></div>\n\n      <>\n          {logged_in === false ?\n          <>\n          <div className=\"form-group\"  >\n              <input type=\"submit\" value=\"Authenticate Me\" onClick={()=>{login()}} className=\"btn btn-primary\" />\n          </div>\n          <div className=\"form-group\">\n                <button onClick={openCamera}>Open Camera</button>\n                {showCamera && (\n                  <div>\n                    <video ref={videoRef} autoPlay />\n                  </div>\n                )}\n              </div>\n          </>\n          :\n          <div>\n                          <img src={imagePath} alt=\"logo\" />\n\n             {name !== (null || \"You are unknown\") ?\n          <>\n              <div className=\"details\">\n                  <h1>Hello {name} !</h1>\n                  <br />\n                  \n                  <h1>You are successfully logged in to the system.\n                  you will be redirected after :{logged_in && <p>{timeLeft}</p>} \n            </h1>\n                  <div className=\"form-group\">\n{/*                       <input type=\"submit\" value=\"Logout\" onClick={()=>{this.setState({msg:null,logged_in:false})}} className=\"btn btn-primary\" />\n */}                  </div>  \n              </div>\n              </>\n          :\n          <div>\n            <p>\"unknown\"</p>\n          </div>\n          }\n          </div>\n          \n          }  </>\n          \n      </Container>\n    </div>\n    </div>\n    </div>\n    </div>\n     \n     \n  )\n}\n        "],"mappings":"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"},"metadata":{},"sourceType":"module"}